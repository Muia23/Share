{% load bootstrap4 %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">        
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
        <title> Sharer | Home</title>
    </head>
    <body>
        <div class="row" style="height: 97vh;">
            <div class="col-md-3" style="background-color: aqua; width: 100%;">
                <div class="row">
                    <div class="container">
                        <h1 style="text-align: center;"> Sharer</h1>
                    </div>                
                </div>
                <div class="row" style="padding: 30px;">
                    <!-- A search form -->
                    <form class="navbar-form" role="search" action= "{% url 'search_results' %}"s style="background-color: white;">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Search Category eg. #category" name="post">
                            <div class="input-group-btn">
                                <button class="btn btn-default" type="submit">search</button>
                            </div>                            
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-md-9" style="width: 100%;">
                <br>            
                <ul class="container" style="max-height: 90vh; overflow-y: scroll;">                    
                    {% for post in posts %}
                        <li style=" display: inline-block; padding: 10px 5px;"> 
                            <div class="card" data-toggle="modal" data-target="#{{post.name}}" style="height: 370px; width: 250px; background: linear-gradient(rgba(17, 17, 17,.5), transparent, rgba(17, 17, 17,.7)),url( '{{post.image_url.url}}'); background-size: cover;">                                                                                                                                                                
                                <h5 style="display: inline-block; position: absolute;color: white; top: 10px; left:15px;">{{post.title}}</h5>
                                <p style="display: inline-block; position: absolute; color: white; top: 30px; left:15px;">{{post.location}}</p>
                                <p style="display: inline-block; position: absolute; color: white; bottom: 3px; right: 10px;">#{{post.category}}</p>
                            </div>                                                        
                            <!-- Modal -->
                            <div class="modal fade" id="{{post.name}}" tabindex="-1" role="dialog" aria-labelledby="{{post.title}}" aria-hidden="true">
                                <div class="modal-dialog modal-xl modal-dialog-centered"  role="document">
                                    <div class="modal-content"> 
                                        <div class="modal-body-fluid">                                            
                                            
                                            <div class="row">                                                
                                                <div class="col-md-6" style="overflow: hidden;">                                                                                                    
                                                    <img src="{{post.image_url.url}}" alt="" style="height: 750px;">                                                                                
                                                </div>       
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="position: absolute; right: 5px;">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>                                         
                                                <div class="col-md-5" style="padding-top: 15%;">                                                                                  
                                                    <h2 style="padding-right: 10px;">{{post.title}}    <sup><span style="font-size: 19px; background-color: #E84C37;">#{{post.category}}</span></sup></h2>                                                    
                                                    <h5>{{post.location}}</h3>
                                                    <hr>
                                                    <br>
                                                    <p style="text-align: center;">{{post.caption}}</p>
                                                    <br>
                                                    <hr>
                                                    <p>image link:</p>                                
                                                    <div class="input-group mb-3">
                                                        <input type="text" class="form-control" id="imageUrl" value="http://127.0.0.1:8000/media/{{post.image_url}}" aria-describedby="basic-addon1" readonly>
                                                        <div class="input-group-prepend">
                                                            <button class="input-group-text" id="basic-addon1" onclick="clipFunction()">Copy</button>
                                                        </div>
                                                    </div>                                                                  
                                                    <p>To open the image click <a href = "http://127.0.0.1:8000/media/{{post.image_url}}">here</a></p>

                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                </div>
                                            </div>  
                                        </div>                                    
                                    </div>
                                </div>
                            </div>                    
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>        
        <script>
            $('#myModal').on('shown.bs.modal', function () {
                $('#myInput').trigger('focus')
            })
            function clipFunction() {
                var copyText = document.getElementById("imageUrl");
                copyText.select();
                copyText.setSelectionRange(0,99999)
                document.execCommand("copy");
                alert("Url copied to clipboard");
            }
        </script>
    </body>
</html>
